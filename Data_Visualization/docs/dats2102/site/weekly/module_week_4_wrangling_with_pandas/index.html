<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Week 4 â€” Wrangling with pandas - DATS 2102</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">DATS 2102</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../syllabus/" class="nav-link">Syllabus</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../course_modules/" class="nav-link">Modules</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#week-4-wrangling-with-pandas" class="nav-link">Week 4 â€” Wrangling with pandas</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#background-motivation" class="nav-link">ğŸ“– Background &amp; Motivation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#learning-objectives" class="nav-link">ğŸ” Learning Objectives</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#readings-resources" class="nav-link">ğŸ“š Readings &amp; Resources</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#setup-checklist" class="nav-link">ğŸ› ï¸ Setup Checklist</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#lecture-outline" class="nav-link">ğŸ§­ Lecture Outline</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#starter-notebook-snippets" class="nav-link">ğŸ’» Starter Notebook Snippets</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#in-class-activity" class="nav-link">ğŸ§ª In-Class Activity</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#homework-due-next-thursday-sept-25" class="nav-link">ğŸ  Homework (Due next Thursday, Sept 25)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#optional-extensions" class="nav-link">ğŸ§© Optional Extensions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#submission-checklist" class="nav-link">âœ… Submission Checklist</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="week-4-wrangling-with-pandas">Week 4 â€” Wrangling with pandas</h1>
<blockquote>
<p>Learning how to clean, transform, and prepare data for effective visualization.</p>
</blockquote>
<hr />
<h2 id="background-motivation">ğŸ“– Background &amp; Motivation</h2>
<p>Data visualization is only as good as the data behind it. Most real-world datasets are messy, requiring cleaning and transformation before they can be meaningfully visualized. Pandas is the cornerstone Python library for data wrangling, providing flexible tools to reshape, aggregate, and join datasets. This week introduces practical techniques for preparing data that will allow you to build more accurate and insightful visualizations.</p>
<hr />
<h2 id="learning-objectives">ğŸ” Learning Objectives</h2>
<ul>
<li>Select, filter, group, summarize, and reshape data in pandas.</li>
<li>Work with datetime and categorical data types.</li>
<li>Join and merge datasets for richer analysis.</li>
<li>Prepare clean datasets ready for visualization.</li>
</ul>
<hr />
<h2 id="readings-resources">ğŸ“š Readings &amp; Resources</h2>
<ul>
<li><a href="https://pandas.pydata.org/docs/user_guide/index.html">Pandas User Guide</a></li>
<li><a href="https://pandas.pydata.org/docs/user_guide/10min.html">10 Minutes to pandas</a></li>
<li><a href="https://pandas.pydata.org/docs/user_guide/text.html">Working with Text Data</a></li>
<li><a href="https://pandas.pydata.org/docs/user_guide/timeseries.html">Time Series / Date Functionality</a></li>
</ul>
<p><strong>Sample Data Sources:</strong></p>
<ul>
<li>NYC Taxi trips sample (NYC Open Data)</li>
<li>COVID-19 data (Johns Hopkins University)</li>
</ul>
<hr />
<h2 id="setup-checklist">ğŸ› ï¸ Setup Checklist</h2>
<p>Ensure you can run:</p>
<pre><code class="language-bash">pip install pandas matplotlib seaborn
</code></pre>
<hr />
<h2 id="lecture-outline">ğŸ§­ Lecture Outline</h2>
<h3 id="session-1-75-min-theory-focus">Session 1 (75 min â€” Theory Focus)</h3>
<ol>
<li>Introduction to pandas DataFrames &amp; Series (15 min)</li>
<li>Selection and filtering operations (20 min)</li>
<li>GroupBy and aggregation (20 min)</li>
<li>Intro to joining and merging: <strong>concepts and syntax</strong>Â (15 min)</li>
<li>Hands-on with NYC Taxi dataset (20 min). Download the files from <a href="../week4/file_list/">here</a></li>
</ol>
<h3 id="session-2-75-min-hands-on">Session 2 (75 min - Hands-On)</h3>
<ol>
<li>Recap &amp; troubleshooting (10 min)</li>
<li>Reshaping data: pivot, melt, stack/unstack (25 min)</li>
<li>Working with datetime and categorical variables (20 min)</li>
<li>Merging and joining multiple datasets (20 min)</li>
<li>Download the <a href="../week4/week4_session2_hands_on_student.ipynb">Jupyter Notebook</a> and the <a href="../week4/nyc_population_2024.csv">additional population table</a> for the session.</li>
</ol>
<hr />
<h2 id="starter-notebook-snippets">ğŸ’» Starter Notebook Snippets</h2>
<pre><code class="language-python">import pandas as pd

# Load dataset
trips = pd.read_csv(&quot;nyc_taxi_sample.csv&quot;)

# Filter rows
filtered = trips[trips[&quot;passenger_count&quot;] &gt; 2]

# Group and aggregate
agg = trips.groupby(&quot;passenger_count&quot;)[&quot;fare_amount&quot;].mean()

# Reshape with melt
df_wide = pd.DataFrame({
    'id': [1, 2],
    'math': [90, 80],
    'english': [85, 78]
})
df_tidy = df_wide.melt(id_vars='id', var_name='subject', value_name='score')

# Parse dates
trips['pickup_datetime'] = pd.to_datetime(trips['pickup_datetime'])
</code></pre>
<hr />
<h2 id="in-class-activity">ğŸ§ª In-Class Activity</h2>
<ul>
<li>Use the COVID-19 dataset to:</li>
<li>Filter by one country and visualize new cases over time.</li>
<li>Group data by month and compare monthly averages.</li>
<li>Reshape the dataset to tidy form and create a plot.</li>
</ul>
<hr />
<h2 id="homework-due-next-thursday-sept-25">ğŸ  Homework (Due next Thursday, Sept 25)</h2>
<ol>
<li>Select a dataset with at least 5 columns.</li>
<li>Perform the following in a notebook:</li>
<li>Clean and filter the dataset.</li>
<li>Apply at least 2 groupby operations with aggregations.</li>
<li>Reshape the dataset at least once (pivot, melt, etc.).</li>
<li>Create 3 visualizations from the cleaned dataset.</li>
<li>Submit <code>.ipynb</code> and <code>.html</code>.</li>
</ol>
<p><strong>Rubric (10 pts)</strong></p>
<ul>
<li>Correct wrangling operations applied (4)</li>
<li>Creativity in reshaping &amp; grouping (2)</li>
<li>Clear and readable plots (2)</li>
<li>Reproducibility (2)</li>
</ul>
<hr />
<h2 id="optional-extensions">ğŸ§© Optional Extensions</h2>
<ul>
<li>Merge two datasets to add richer context.</li>
<li>Explore pandas string operations to clean messy text.</li>
<li>Create a time series plot with rolling averages.</li>
</ul>
<hr />
<h2 id="submission-checklist">âœ… Submission Checklist</h2>
<p>Before submitting, make sure:</p>
<ul>
<li>
<p>Your assignment has fulfilled all the basic requirements listed above.</p>
</li>
<li>
<p>The operations and visualizations in the Jupyter notebook are correct.</p>
</li>
<li>Use Quarto to render the notebook and ensure the content is displayed well.</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
